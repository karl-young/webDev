<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Pokemon!</h1>
    <main>
        <ul class="list">
            <!-- Pokemon names here -->
        </ul>
        <section class="panel">
            <!-- Selected pokemon here -->
             <p><< Select a pokemon to display</p>
        </section>
    </main>
    <script>
        // Fetch some random Pokemon from the PokeAPI
async function fetchPokes() {
    // Generate a random starting point (offset) between 0 and 49
    // This decides which "batch" of Pokemon we fetch
    let num = Math.floor(Math.random() * 50);

    // Fetch 10 Pokemon starting at that offset
    const res = await fetch(`https://pokeapi.co/api/v2/pokemon?limit=10&offset=${num}`);
    
    // Convert the API response into JSON (a JavaScript object)
    const pokeData = await res.json();

    // Pass the data to our function that will display them
    loopPokes(pokeData);
}

// Generate a list of Pokemon names as clickable buttons
function loopPokes(pokes) {
    // Loop through each Pokemon returned in the results array
    for (pokemon of pokes.results) {
        // Create a <li> element for each Pokemon
        const poke = document.createElement("li");

        // Give it a class (for styling in CSS)
        poke.className = "btn";

        // Show the Pokemon's name as the text
        poke.innerHTML = pokemon.name;

        // Store the Pokemon's unique API URL on the element itself
        // (so we can fetch more info later when clicked)
        poke.url = pokemon.url;

        // Add this <li> into the list on the page (with class="list")
        document.querySelector(".list").appendChild(poke);

        // Add a click event listener so when user clicks,
        // it calls getMyPokemon() with this Pokemon's data
        poke.addEventListener("click", getMyPokemon);
    }
}

// When a Pokemon in the list is clicked, fetch its details
async function getMyPokemon(e) {
    // e.target is the <li> that was clicked
    // Fetch data from the stored URL for that Pokemon
    const res = await fetch(e.target.url);

    // Convert the response into JSON
    const pokeData = await res.json();

    // Grab the ".panel" element (where we'll display details)
    const panel = document.querySelector(".panel");

    // Fill the panel with the Pokemon's name, image, and header for abilities
    panel.innerHTML = `
        <h2>${pokeData.name}</h2>
        <img src="${pokeData.sprites.other["official-artwork"].front_default}" alt="${pokeData.name}">
        <h3>Abilities:</h3>
    `;

    // Create a <ul> to hold the list of abilities
    const abilities = document.createElement("ul");
    panel.appendChild(abilities);

    // Loop through the Pokemon's abilities array
    for (ability of pokeData.abilities) {
        // Create a new <li> for each ability
        const item = document.createElement("li");

        // Each ability object has an `ability` property with a `name`
        item.innerHTML = ability.ability.name;

        // Add it to the <ul>
        abilities.appendChild(item);
    }
}

// Call fetchPokes() once when the page loads
// This starts the whole process by grabbing some Pokemon
fetchPokes();



    </script>
    <style>
 
       body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        main{
            display:flex;
            flex-direction: row;
            gap:2em
        }

        h1{
            margin-left:1rem;
        }
        h2{
            text-transform:capitalize;
        }
        .list{
            padding:0;
        }
        img{
            max-width:200px;
        }
        .btn{
            border:1px solid grey;
            box-shadow: 5px 5px 5px #999;
            padding: 1em;
            margin:1em;
            max-width:120px;
            list-style:none;
            cursor:pointer;

        }
        .btn:hover{
            background-color: #FFCC00;
        }
        .panel{
            border:1px solid grey;
            box-shadow: 5px 5px 5px #999;
            padding: 1em;
            margin-top:2em;
            align-self: flex-start;
        }

    </style>
</body>
</html>